<html>
  <head>
    <title>View the orgchart</title>
  </head>

  <body>
    <div id="graph" style="width: 100%; height: 100%; overflow: scroll;"></div>
    <p>Click node to highlight; Shift-scroll to zoom; Esc to unhighlight</p>

    <script type="text/javascript" src="https://code.jquery.com/jquery-2.1.3.min.js"></script>
    <script type="text/javascript" src="https://cdn.rawgit.com/jquery/jquery-mousewheel/master/jquery.mousewheel.min.js"></script>
    <script type="text/javascript" src="https://cdn.rawgit.com/jquery/jquery-color/master/jquery.color.js"></script>
    <script type="text/javascript" src="https://cdn.rawgit.com/mountainstorm/jquery.graphviz.svg/master/js/jquery.graphviz.svg.js"></script>
    <script type="text/javascript">
      $(document).ready(function(){
                $("#graph").graphviz({
                    url: "/orgchart.svg",
                    ready: function() {
                        var gv = this
                        gv.nodes().click(function () {
                            var $set = $()
                            $set.push(this)
                            $set = $set.add(gv.linkedFrom(this, true))
                            $set = $set.add(gv.linkedTo(this, true))
                            gv.highlight($set, true)
                            gv.bringToFront($set)
                        })
                        $(document).keydown(function (evt) {
                            if (evt.keyCode == 27) {
                                gv.highlight()
                            }
                        })
                    }
                });
            });
    </script>
  </body>
</html>
